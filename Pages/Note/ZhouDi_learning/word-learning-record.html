<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="å‘¨è¿ªçš„è‹±è¯­å•è¯å­¦ä¹ è®°å½•ï¼Œæ¯æ—¥æ›´æ–°ï¼ŒåŒ…å«å•è¯é‡Šä¹‰ã€ä¾‹å¥å’Œç”¨æ³•ã€‚">
    <meta name="keywords" content="è‹±è¯­å­¦ä¹ , å•è¯è®°å¿†, æ¯æ—¥å•è¯, è‹±è¯­è¯æ±‡, NEGIAO">
    <meta name="author" content="NEGIAO">
    <meta name="theme-color" content="#0D1117">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://negiao.github.io/Pages/Note/word-learning-record.html">
    <meta property="og:title" content="è‹±è¯­å•è¯å­¦ä¹ è®°å½• - NEGIAO">
    <meta property="og:description" content="å‘¨è¿ªçš„è‹±è¯­å•è¯å­¦ä¹ è®°å½•ï¼Œæ¯æ—¥æ›´æ–°ï¼ŒåŒ…å«å•è¯é‡Šä¹‰ã€ä¾‹å¥å’Œç”¨æ³•ã€‚">
    <meta property="og:image" content="https://negiao.github.io/Pages/avatar.jpg">

    <title>è‹±è¯­å•è¯å­¦ä¹ è®°å½• - å‘¨è¿ª</title>
    <link rel="icon" type="image/png" href="/images/icon.png">
    <link rel="shortcut icon" type="image/png" href="/images/icon.png">
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Use BootCDN as primary source for marked -->
    <script defer src="https://cdnjs.loli.net/ajax/libs/marked/9.1.2/marked.min.js"></script>
    <script defer src="../../notes-toc.js"></script>
    <script defer src="../../main-enhanced.js"></script>

    <style>
                /* Fix for code block alignment - 
        ä»£ç å—è¦é»˜è®¤å·¦å¯¹é½
        ensure left alignment for ASCII trees */
        .note-content pre, 
        .note-content code {
            text-align: left !important;
        }
        
        /* New TOC Toggle Button */
        .toc-toggle-btn {
            position: fixed;
            bottom: 90px;
            right: 30px;
            width: 45px;
            height: 45px;
            background: var(--surface-elevated);
            border: 1px solid var(--border);
            border-radius: 50%;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
        }

        .toc-toggle-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(0, 217, 255, 0.4);
        }

        /* Hidden state for TOC */
        .note-toc.note-toc--hidden {
            transform: translateY(-50%) translateX(150%);
            opacity: 0;
            pointer-events: none;
        }

        /* Ensure transition matches */
        .note-toc {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
        }

        @media (max-width: 768px) {
            .toc-toggle-btn {
                bottom: 80px;
                right: 20px;
            }

            /* Force fixed positioning on mobile to support toggle behavior */
            .note-toc {
                position: fixed !important;
                top: 50% !important;
                right: 20px !important;
                width: 260px !important;
                max-height: 60vh !important;
                transform: translateY(-50%) !important;
                z-index: 1050 !important;
                order: unset !important;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
            }

            /* Hidden state for mobile */
            .note-toc.note-toc--hidden {
                transform: translateY(-50%) translateX(150%) !important;
                opacity: 0 !important;
                pointer-events: none;
            }
        }

        /* Word test container styles */
        .word-test-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 20px auto 30px;
            max-width: 800px;
        }

        .word-test-container h2 {
            text-align: center;
            margin-bottom: 15px;
            color: white;
            font-weight: 600;
        }

        .test-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 25px;
            color: #333;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .test-question h3 {
            font-size: 28px;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .question-text {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .test-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option-btn {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 15px;
            text-align: center;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option-btn:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .option-btn.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .option-btn.wrong {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .option-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .test-controls {
            text-align: center;
        }

        .test-result {
            text-align: center;
            margin-top: 15px;
            font-size: 16px;
            font-weight: 500;
        }

        .test-result.correct {
            color: #28a745;
        }

        .test-result.wrong {
            color: #dc3545;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        @media (max-width: 768px) {
            .test-options {
                grid-template-columns: 1fr;
            }

            .test-stats {
                flex-direction: column;
                align-items: center;
            }

            .word-test-container {
                padding: 15px;
            }

            .test-card {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="navbar__container">
            <a href="../../../index.html" class="navbar__brand">å‘¨è¿ª</a>
            <a href="../../notes.html" class="btn btn--secondary">è¿”å›ç´¢å¼•</a>
        </div>
    </nav>

    <main class="container section note-layout">

        <!-- Independent TOC Toggle Button -->
        <button id="toc-toggle-btn" class="toc-toggle-btn" aria-label="Toggle Table of Contents">
            <i class="fas fa-list"></i>
        </button>

        <aside class="note-toc card" aria-label="æ–‡ç« ç« èŠ‚ç›®å½•">
            <nav class="note-toc__nav" id="note-toc"></nav>


        </aside>

        <!-- å•è¯æµ‹è¯•åŒºåŸŸ -->
        <div id="word-test-section" class="word-test-container">
            <h2>ğŸ¯ æ¯æ—¥å•è¯æµ‹è¯•</h2>
            <div class="test-stats">
                <span class="stat-item">æ­£ç¡®: <span id="correct-count">0</span></span>
                <span class="stat-item">é”™è¯¯: <span id="wrong-count">0</span></span>
                <span class="stat-item">å‡†ç¡®ç‡: <span id="accuracy">0%</span></span>
            </div>

            <div id="test-card" class="test-card">
                <div class="test-question">
                    <h3 id="test-word">Loading...</h3>
                    <p class="question-text">è¯·é€‰æ‹©æ­£ç¡®çš„ä¸­æ–‡å«ä¹‰ (ç­”å¯¹è‡ªåŠ¨è·³è½¬ä¸‹ä¸€é¢˜)</p>
                </div>

                <div class="test-options" id="test-options">
                    <!-- é€‰é¡¹å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>

                <div class="test-controls">
                    <button id="next-word-btn" class="btn btn-primary" style="display: none;">ä¸‹ä¸€é¢˜</button>
                    <button id="start-test-btn" class="btn btn-secondary">å¼€å§‹æµ‹è¯•</button>
                </div>

                <div id="test-result" class="test-result" style="display: none;">
                    <!-- ç»“æœåé¦ˆ -->
                </div>
            </div>
        </div>

        <article class="note-content card" id="note-content">
            <script type="text/markdown" id="note-markdown">
# ğŸ“š è‹±è¯­å•è¯å­¦ä¹ è®°å½•

å‘¨è¿ªè‹±è¯­å•è¯å­¦ä¹ ç¬”è®°ï¼Œè®°å½•æ—¥å¸¸å­¦ä¹ ä¸­é‡åˆ°çš„ç”Ÿè¯ã€çŸ­è¯­å’Œè¡¨è¾¾ã€‚æŒ‰å­¦ä¹ æ—¶é—´å’Œä¸»é¢˜åˆ†ç±»æ•´ç†ã€‚

## ğŸ“… 2025å¹´ æœˆå­¦ä¹ è®°å½•

### 2025- -  æ–°å¢å•è¯

| å•è¯ | è¯æ€§ | ä¸­æ–‡é‡Šä¹‰ | ä¾‹å¥/ç”¨æ³• |
|------|------|----------|-----------|
| **Sanction** | n./v. | åˆ¶è£ï¼›æ‰¹å‡† | The government imposed economic sanctions on the country. |
| **Forge** | v. | ä¼ªé€ ï¼›é”»é€  | He was arrested for forging documents. |
| **Evade** | v. | é€ƒé¿ï¼›è§„é¿ | It's illegal to evade responsibility. |
| **Spectacle** | n. | æ™¯è±¡ï¼›å¥‡è§‚ | The fireworks created a spectacular spectacle. |
| **Sprawl** | v./n. | è”“å»¶ï¼›å››è‚¢ä¼¸å¼€çš„å§¿åŠ¿ | Urban sprawl is a major environmental concern. |
| **Culmination** | n. | é«˜æ½®ï¼›é¡¶ç‚¹ | This achievement is the culmination of years of hard work. |
| **Conspire** | v. | å…±è°‹ï¼›é˜´è°‹ | They conspired to overthrow the government. |
| **Mitigate** | v. | ç¼“è§£ï¼›å‡è½» | We need to mitigate the effects of climate change. |
| **Wired** | adj. | å…´å¥‹çš„ï¼›ç´§å¼ çš„ | I'm too wired to sleep after all that caffeine. |

        </script>
        </article>
    </main>

    <!-- Load highlight.js with defer to improve page load performance -->
    <script src="https://cdnjs.loli.net/ajax/libs/highlight.js/11.7.0/highlight.min.js" defer></script>

    <script>
        // Optimized markdown rendering
        document.addEventListener('DOMContentLoaded', function () {
            const src = document.getElementById('note-markdown');
            if (!src) return;

            const md = src.textContent || src.innerText || '';
            const container = document.getElementById('note-content');
            if (!container) return;

            // Show loading state immediately
            container.innerHTML = '<div style="text-align:center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> æ­£åœ¨åŠ è½½å†…å®¹...</div>';
            container.style.opacity = '1';

            let retryCount = 0;
            const maxRetries = 60; // 3 seconds timeout (50ms * 60)

            function render() {
                if (window.marked) {
                    try {
                        container.innerHTML = window.marked.parse(md);
                        // Manually trigger animation class in case observer missed it
                        container.classList.add('animate-in');
                        container.style.opacity = '1';
                        container.style.transform = 'translateY(0)';

                        // Use requestAnimationFrame to ensure DOM is updated before post-processing
                        requestAnimationFrame(postRender);
                    } catch (e) {
                        console.error('Markdown parsing error:', e);
                        container.innerHTML = '<p>Error parsing content.</p>';
                        container.style.opacity = '1';
                    }
                } else {
                    retryCount++;
                    if (retryCount < maxRetries) {
                        // Retry if marked is not yet loaded
                        setTimeout(render, 50);
                    } else {
                        // Fallback if marked fails to load
                        console.error('Marked library failed to load');
                        container.innerHTML = '<div style="color: #ff6b6b; padding: 20px; text-align: center;">' +
                            '<i class="fas fa-exclamation-triangle"></i> å†…å®¹åŠ è½½å¤±è´¥<br>' +
                            '<small>æ— æ³•åŠ è½½ Markdown è§£æåº“ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚</small></div>' +
                            '<pre style="white-space: pre-wrap; font-family: monospace; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 8px;">' + md + '</pre>';
                        container.style.opacity = '1';
                        container.style.transform = 'translateY(0)';
                    }
                }
            }

            function postRender() {
                // Build table of contents
                if (window.buildNoteTOC) {
                    window.buildNoteTOC();
                    setupTocToggle();
                }

                // Initialize Word Test
                try {
                    if (typeof WordTest !== 'undefined') {
                        new WordTest();
                    }
                } catch (e) {
                    console.error('Word test initialization:', e);
                }

                // Apply syntax highlighting
                if (window.hljs) {
                    container.querySelectorAll('pre code').forEach((block) => {
                        hljs.highlightBlock(block);
                    });
                } else if (window.onhljsready) {
                    window.onhljsready();
                }
            }

            render();
        });

        // Set up TOC toggle functionality
        function setupTocToggle() {
            const tocToggle = document.getElementById('toc-toggle');
            const tocAside = document.querySelector('.note-toc');

            if (tocToggle && tocAside) {
                tocToggle.addEventListener('click', function () {
                    tocAside.classList.toggle('note-toc--collapsed');
                    const collapsed = tocAside.classList.contains('note-toc--collapsed');
                    tocToggle.setAttribute('aria-expanded', String(!collapsed));

                    // ç¼“å­˜çŠ¶æ€åˆ°localStorage
                    try {
                        localStorage.setItem('note-toc-collapsed', collapsed ? '1' : '0');
                    } catch (err) { }

                    // ç«‹å³æ›´æ–°è§†è§‰çŠ¶æ€
                    if (window.innerWidth >= 769) {
                        if (collapsed) {
                            tocAside.style.transform = 'translateY(-50%) translateX(120%)';
                            tocAside.style.right = '12px';
                        } else {
                            tocAside.style.transform = 'translateY(-50%) translateZ(0)';
                            tocAside.style.right = '28px';
                        }
                    }
                });

                // æ¢å¤ä¿å­˜çš„çŠ¶æ€
                try {
                    const saved = localStorage.getItem('note-toc-collapsed');
                    if (saved === '1') {
                        tocAside.classList.add('note-toc--collapsed');
                        if (window.innerWidth >= 769) {
                            tocAside.style.transform = 'translateY(-50%) translateX(120%)';
                            tocAside.style.right = '12px';
                        }
                        tocToggle.setAttribute('aria-expanded', 'false');
                    }
                } catch (err) { }
            }
        }

        // Set up highlight.js load callback
        if (typeof hljs === 'undefined') {
            window.addEventListener('load', function () {
                if (typeof hljs !== 'undefined' && typeof window.onhljsready === 'function') {
                    window.onhljsready();
                }
            });
        }

        // å•è¯æµ‹è¯•åŠŸèƒ½
        class WordTest {
            constructor() {
                // ä½¿ç”¨ JSON æ–‡ä»¶ä½œä¸ºé¦–é€‰æ•°æ®æ¥æºï¼Œå¤‡ç”¨ä¸ºå†…åµŒè¯åº“
                this.words = [];
                // å¤‡ç”¨è¯åº“
                this.fallbackWords = [
                    { word: 'sanction', meaning: 'åˆ¶è£ï¼›æ‰¹å‡†', options: ['åˆ¶è£ï¼›æ‰¹å‡†', 'ä¼ªé€ ï¼›é”»é€ ', 'é€ƒé¿ï¼›è§„é¿', 'æ™¯è±¡ï¼›å¥‡è§‚'] },
                    { word: 'forge', meaning: 'ä¼ªé€ ï¼›é”»é€ ', options: ['åˆ¶è£ï¼›æ‰¹å‡†', 'ä¼ªé€ ï¼›é”»é€ ', 'é€ƒé¿ï¼›è§„é¿', 'è”“å»¶ï¼›ä¼¸å±•'] },
                    { word: 'evade', meaning: 'é€ƒé¿ï¼›è§„é¿', options: ['é€ƒé¿ï¼›è§„é¿', 'é«˜æ½®ï¼›é¡¶ç‚¹', 'å…±è°‹ï¼›é˜´è°‹', 'ç¼“è§£ï¼›å‡è½»'] },
                    { word: 'spectacle', meaning: 'æ™¯è±¡ï¼›å¥‡è§‚', options: ['æ™¯è±¡ï¼›å¥‡è§‚', 'è”“å»¶ï¼›ä¼¸å±•', 'é«˜æ½®ï¼›é¡¶ç‚¹', 'å…±è°‹ï¼›é˜´è°‹'] },
                    { word: 'sprawl', meaning: 'è”“å»¶ï¼›ä¼¸å±•', options: ['è”“å»¶ï¼›ä¼¸å±•', 'é«˜æ½®ï¼›é¡¶ç‚¹', 'å…±è°‹ï¼›é˜´è°‹', 'ç¼“è§£ï¼›å‡è½»'] },
                    { word: 'strip', meaning: 'å‰¥å¤ºï¼›è„±å»', options: ['å‰¥å¤ºï¼›è„±å»', 'å·®å¼‚ï¼›ä¸ä¸€è‡´', 'ç¼ºä¹ï¼›ä¸è¶³', 'åŠ¨èƒ½ï¼›åŠ¿å¤´'] },
                    { word: 'discrepancy', meaning: 'å·®å¼‚ï¼›ä¸ä¸€è‡´', options: ['å·®å¼‚ï¼›ä¸ä¸€è‡´', 'å‰¥å¤ºï¼›è„±å»', 'è‰°éš¾å¯Ÿè§‰ï¼›è¯†åˆ«', 'åœé¡¿ï¼›æ‹–å»¶'] },
                    { word: 'momentum', meaning: 'åŠ¨èƒ½ï¼›åŠ¿å¤´', options: ['åŠ¨èƒ½ï¼›åŠ¿å¤´', 'å‰¥å¤ºï¼›è„±å»', 'å·®å¼‚ï¼›ä¸ä¸€è‡´', 'è‰°éš¾å¯Ÿè§‰ï¼›è¯†åˆ«'] }
                ];

                this.currentWord = null;
                this.correctCount = 0;
                this.wrongCount = 0;
                this.isAnswered = false;

                this.initElements();
                this.bindEvents();

                // åˆå§‹åŒ–åŠ è½½çŠ¶æ€
                if (this.startBtn) {
                    this.startBtn.disabled = true;
                    this.startBtn.textContent = 'åŠ è½½è¯åº“ä¸­â€¦';
                }

                // å¼‚æ­¥åŠ è½½è¯åº“
                this.loadWords();
            }

            initElements() {
                this.testWord = document.getElementById('test-word');
                this.testOptions = document.getElementById('test-options');
                this.nextBtn = document.getElementById('next-word-btn');
                this.startBtn = document.getElementById('start-test-btn');
                this.testResult = document.getElementById('test-result');
                this.correctCountEl = document.getElementById('correct-count');
                this.wrongCountEl = document.getElementById('wrong-count');
                this.accuracyEl = document.getElementById('accuracy');
            }

            bindEvents() {
                this.startBtn.addEventListener('click', () => this.startTest());
                this.nextBtn.addEventListener('click', () => this.nextQuestion());
            }

            async loadWords() {
                try {
                    // é¦–å…ˆå°è¯•åŠ è½½JSONæ–‡ä»¶
                    try {
                        // è·¯å¾„ç›¸å¯¹äºå½“å‰ HTML æ–‡ä»¶ (Pages/Note/ZhouDi_learning/)
                        const resp = await fetch('./word-list.json', { cache: 'no-store' });
                        if (!resp.ok) throw new Error('Failed to load word-list.json');
                        const data = await resp.json();
                        // åªä¿ç•™éœ€è¦çš„å­—æ®µï¼Œå¹¶ç¡®ä¿é€‰é¡¹æ•°ç»„åŒ…å«æ­£ç¡®ç­”æ¡ˆ
                        this.words = (Array.isArray(data) ? data : []).map(item => ({
                            word: String(item.word || '').trim(),
                            meaning: String(item.meaning || '').trim(),
                            options: Array.isArray(item.options) && item.options.length ? item.options.slice() : [String(item.meaning || '').trim()]
                        })).filter(w => w.word && w.meaning);
                        console.log('JSONè¯åº“åŠ è½½æˆåŠŸï¼Œå…±', this.words.length, 'ä¸ªå•è¯');
                    } catch (err) {
                        console.error('JSONåŠ è½½å¤±è´¥ï¼Œåˆ‡æ¢åˆ°å†…ç½®è¯åº“:', err);
                        throw err; // é‡æ–°æŠ›å‡ºä»¥è§¦å‘å¤‡ç”¨è¯åº“
                    }

                    // å¦‚æœJSONè¯åº“ä¸ºç©ºï¼Œä½¿ç”¨å¤‡ç”¨è¯åº“
                    if (this.words.length === 0) {
                        console.log('JSONè¯åº“ä¸ºç©ºï¼Œä½¿ç”¨å¤‡ç”¨è¯åº“');
                        this.words = this.fallbackWords;
                    }
                } catch (err) {
                    // å¦‚æœJSONåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å†…ç½®è¯åº“ä½œä¸ºå¤‡ç”¨
                    console.log('ä½¿ç”¨å¤‡ç”¨è¯åº“');
                    this.words = this.fallbackWords;
                } finally {
                    console.log('è¯åº“å‡†å¤‡å®Œæˆï¼Œå…±', this.words.length, 'ä¸ªå•è¯');
                    if (this.startBtn) {
                        this.startBtn.disabled = this.words.length === 0;
                        this.startBtn.textContent = this.words.length === 0 ? 'è¯åº“åŠ è½½å¤±è´¥' : 'å¼€å§‹æµ‹è¯•';
                    }
                }
            }

            startTest() {
                if (!this.words || this.words.length === 0) {
                    this.testWord.textContent = 'è¯åº“æœªåŠ è½½ï¼Œæ— æ³•å¼€å§‹æµ‹è¯•';
                    return;
                }
                console.log('å¼€å§‹æµ‹è¯•ï¼Œå¯ç”¨å•è¯ï¼š', this.words.length, 'ä¸ª');
                this.startBtn.style.display = 'none';
                this.nextQuestion();
            }

            nextQuestion() {
                this.isAnswered = false;
                this.testResult.style.display = 'none';
                this.nextBtn.style.display = 'none';

                // éšæœºé€‰æ‹©å•è¯ï¼ˆå½“è¯åº“ä¸ºç©ºæ—¶å®‰å…¨è¿”å›ï¼‰
                if (!this.words || this.words.length === 0) {
                    this.testWord.textContent = 'æš‚æ— è¯åº“æ•°æ®';
                    this.testOptions.innerHTML = '';
                    return;
                }
                this.currentWord = this.words[Math.floor(Math.random() * this.words.length)];
                this.testWord.textContent = this.currentWord.word.toLowerCase();

                // ç¡®ä¿é€‰é¡¹åŒ…å«æ­£ç¡®ç­”æ¡ˆï¼Œå¹¶è¿›è¡Œéšæœºæ’åº
                const optionSet = new Set(this.currentWord.options || []);
                optionSet.add(this.currentWord.meaning);
                const shuffledOptions = this.shuffleArray(Array.from(optionSet));

                // ç”Ÿæˆé€‰é¡¹æŒ‰é’®
                this.testOptions.innerHTML = '';
                shuffledOptions.forEach((option) => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = option;
                    btn.addEventListener('click', () => this.checkAnswer(option, btn));
                    this.testOptions.appendChild(btn);
                });
            }

            checkAnswer(selectedOption, btnElement) {
                if (this.isAnswered) return;

                this.isAnswered = true;
                const isCorrect = selectedOption === this.currentWord.meaning;

                // ç¦ç”¨æ‰€æœ‰æŒ‰é’®å¹¶æ ‡è®°æ­£ç¡®ç­”æ¡ˆ
                const allBtns = this.testOptions.querySelectorAll('.option-btn');
                allBtns.forEach(btn => {
                    btn.classList.add('disabled');
                    if (btn.textContent === this.currentWord.meaning) {
                        btn.classList.add('correct');
                    } else if (btn === btnElement && !isCorrect) {
                        btn.classList.add('wrong');
                    }
                });

                // æ›´æ–°ç»Ÿè®¡
                if (isCorrect) {
                    this.correctCount++;
                    this.testResult.textContent = 'âœ… æ­£ç¡®ï¼æ­£åœ¨è·³è½¬...';
                    this.testResult.className = 'test-result correct';

                    // æ­£ç¡®ç­”æ¡ˆï¼š0.5ç§’åè‡ªåŠ¨è·³è½¬ä¸‹ä¸€é¢˜
                    setTimeout(() => {
                        this.nextQuestion();
                    }, 500);
                } else {
                    this.wrongCount++;
                    this.testResult.textContent = `âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯: ${this.currentWord.meaning}`;
                    this.testResult.className = 'test-result wrong';

                    // é”™è¯¯ç­”æ¡ˆï¼šæ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®ï¼Œéœ€è¦æ‰‹åŠ¨ç‚¹å‡»
                    this.nextBtn.style.display = 'inline-block';
                }

                this.updateStats();
                this.testResult.style.display = 'block';
            }

            updateStats() {
                this.correctCountEl.textContent = this.correctCount;
                this.wrongCountEl.textContent = this.wrongCount;

                const total = this.correctCount + this.wrongCount;
                const accuracy = total > 0 ? Math.round((this.correctCount / total) * 100) : 0;
                this.accuracyEl.textContent = accuracy + '%';
            }

            // Fisher-Yates æ´—ç‰Œç®—æ³•å®ç°æ•°ç»„éšæœºæ’åº
            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
        }

        // åˆå§‹åŒ–å•è¯æµ‹è¯• - å°†åœ¨ç°æœ‰DOMContentLoadedäº‹ä»¶ä¸­åˆå§‹åŒ–
    </script>
    <script>
        function initTocToggle() {
            const toc = document.querySelector('.note-toc');
            const toggleBtn = document.getElementById('toc-toggle-btn');
            const icon = toggleBtn.querySelector('i');

            // Check localStorage for saved state
            const isHidden = localStorage.getItem('toc-hidden') === 'true';

            // Initial state
            if (isHidden) {
                toc.classList.add('note-toc--hidden');
                icon.classList.remove('fa-times');
                icon.classList.add('fa-list');
            } else {
                icon.classList.remove('fa-list');
                icon.classList.add('fa-times');
            }

            toggleBtn.addEventListener('click', () => {
                toc.classList.toggle('note-toc--hidden');

                // Update icon
                if (toc.classList.contains('note-toc--hidden')) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-list');
                    localStorage.setItem('toc-hidden', 'true');
                } else {
                    icon.classList.remove('fa-list');
                    icon.classList.add('fa-times');
                    localStorage.setItem('toc-hidden', 'false');
                }
            });
        }

        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', initTocToggle);
    </script>
</body>

</html>