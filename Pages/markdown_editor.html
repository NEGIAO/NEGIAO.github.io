<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="实时Markdown编辑器 - 支持实时预览的在线Markdown写作工具">
    <title>Markdown 编辑器 - NEGIAO</title>
    <style>
        :root {
            --background: #0D1117;
            --surface: #161B22;
            --surface-alt: #21262D;
            --primary: #58A6FF;
            --text: #C9D1D9;
            --text-light: #8B949E;
            --border: #30363D;
            --font-sans: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }
        body {
            font-family: var(--font-sans);
            line-height: 1.7;
            color: var(--text);
            background: var(--background);
            margin: 0;
            padding: 2rem;
        }
        .container {
            max-width: 90%;
            margin: 0 auto;
        }
        .editor-container {
            display: flex;
            height: calc(100vh - 12rem);
            border: 1px solid var(--border);
            border-radius: 0 0 6px 6px;
            overflow: hidden;
        }
        .editor-pane, .preview-pane {
            width: 50%;
            height: 100%;
            padding: 1rem;
            overflow-y: auto;
        }
        .editor-pane {
            border-right: 1px solid var(--border);
        }
        #markdown-editor {
            width: 100%;
            height: 100%;
            background: transparent;
            border: none;
            color: var(--text);
            font-family: var(--font-mono);
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }
        #content {
            background: var(--surface);
            border-radius: 6px;
        }
        h1, h2, h3 {
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
            margin-top: 1.5rem;
        }
        a {
            color: var(--primary);
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        code {
            background: var(--background);
            padding: 0.2em 0.4em;
            margin: 0;
            font-size: 85%;
            border-radius: 3px;
            font-family: var(--font-mono);
        }
        pre {
            background: var(--background);
            border: 1px solid var(--border);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
        }
        pre code {
            padding: 0;
            background: none;
        }
        blockquote {
            border-left: 4px solid var(--primary);
            padding-left: 1rem;
            color: var(--text-light);
            margin-left: 0;
        }
        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            font-weight: 500;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 1rem;
        }
        th, td {
            border: 1px solid var(--border);
            padding: 0.5rem;
        }
        th {
            background-color: var(--surface-alt);
        }
        .toolbar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px 6px 0 0;
        }
        .toolbar-btn {
            background: var(--surface-alt);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }
        .toolbar-btn:hover {
            background: var(--primary);
            color: var(--background);
            transform: translateY(-1px);
        }
        .toolbar-btn:active {
            transform: translateY(0);
        }
        .toolbar-btn[disabled] {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">&larr; 返回主页</a>
        <h1 style="text-align: center; margin-bottom: 2rem;">实时 Markdown 编辑器</h1>
        
        <div class="toolbar">
            <button class="toolbar-btn" id="clear-btn" title="清空编辑器内容">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 6h18"></path>
                    <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                    <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                </svg>
                Clear
            </button>
            <button class="toolbar-btn" id="copy-btn" title="复制编辑器内容到剪贴板">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                </svg>
                Copy
            </button>
            <button class="toolbar-btn" id="paste-btn" title="从剪贴板粘贴内容">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                </svg>
                Paste
            </button>
        </div>
        
        <div class="editor-container">
            <div class="editor-pane">
                <textarea id="markdown-editor" spellcheck="false"></textarea>
            </div>
            <div class="preview-pane" id="content">
                <!-- Rendered HTML will appear here -->
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        const editor = document.getElementById('markdown-editor');
        const preview = document.getElementById('content');

        const markdownContent = `
# Markdown 语法指南

欢迎来到Markdown学习笔记。Markdown是一种轻量级标记语言，让你能够使用易于阅读、易于编写的纯文本格式编写文档。

---

## 1. 标题 (Headers)

使用\`#\`号可以创建标题，\`#\`的数量代表标题的级别。

\`\`\`markdown
# 这是一级标题
## 这是二级标题
### 这是三级标题
#### 这是四级标题
##### 这是五级标题
###### 这是六级标题
\`\`\`

---

## 2. 文本样式 (Text Styling)

- **粗体**: 使用两个星号\`**\`或两个下划线\`__\`。
- *斜体*: 使用一个星号\`*\`或一个下划线\`_\`。
- ~~删除线~~: 使用两个波浪线\`~~\`。

\`\`\`markdown
**这是粗体文本**
*这是斜体文本*
~~这是带删除线的文本~~
***这是粗斜体文本***
\`\`\`

---

## 3. 列表 (Lists)

### 无序列表

使用星号\`*\`、加号\`+\`或减号\`-\`来创建无序列表。

\`\`\`markdown
* 苹果
* 香蕉
  * 红香蕉
  * 绿香蕉
* 橙子
\`\`\`

### 有序列表

使用数字加\`.\`来创建有序列表。

\`\`\`markdown
1. 第一步
2. 第二步
3. 第三步
\`\`\`

---

## 4. 链接 (Links)

链接可以让你跳转到其他网页。

\`\`\`markdown
[访问我的GitHub主页](https://github.com/NEGIAO)
\`\`\`

**效果:** [访问我的GitHub主页](https://github.com/NEGIAO)

---

## 5. 图片 (Images)

图片语法与链接类似，只是在前面多一个感叹号\`!\`。

\`\`\`markdown
![GitHub Logo](https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png)
\`\`\`

**效果:** ![GitHub Logo](https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png)

---

## 6. 代码 (Code)

### 行内代码

使用反引号 \` \` 来包裹行内代码。

\`\`\`markdown
在JavaScript中，使用 \`console.log()\` 来打印信息。
\`\`\`

**效果:** 在JavaScript中，使用 \`console.log()\` 来打印信息。

### 代码块

使用三个反引号 \`\`\` 来创建代码块，并可以指定语言以获得语法高亮。

\`\`\`markdown
\`\`\`javascript
function greet(name) {
  console.log('Hello, ' + name + '!');
}

greet('World');
\`\`\`
\`\`\`

---

## 7. 引用 (Blockquotes)

使用大于号\`>\`来创建引用块。

\`\`\`markdown
> 这是一段引用。
>
> > 引用可以嵌套。
>
> —— 引用出处
\`\`\`

**效果:**
> 这是一段引用。
> > 引用可以嵌套。
>
> —— 引用出处

---

## 8. 表格 (Tables)

使用管道符\`|\`和连字符\`-\`来创建表格。使用冒号\`:\`来定义对齐方式。

\`\`\`markdown
| 左对齐 | 居中对齐 | 右对齐 |
| :--- | :---: | ---: |
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |
\`\`\`

**效果:**

| 左对齐 | 居中对齐 | 右对齐 |
| :--- | :---: | ---: |
| 单元格1 | 单元格2 | 单元格3 |
| 单元格4 | 单元格5 | 单元格6 |

---

## 9. 分割线 (Horizontal Rules)

使用三个或更多的星号\`***\`、减号\`---\`或下划线\`___\`来创建分割线。

\`\`\`markdown
---
***
___
\`\`\`

---

## 10. 任务列表 (Task Lists)

这是GitHub Flavored Markdown (GFM) 的扩展功能。

\`\`\`markdown
- [x] 完成Markdown语法学习
- [ ] 开始撰写新的笔记
- [ ] 部署更新到GitHub Pages
\`\`\`

**效果:**
- [x] 完成Markdown语法学习
- [ ] 开始撰写新的笔记
- [ ] 部署更新到GitHub Pages

这只是Markdown的基础功能，但已经足够满足大部分日常的文档编写需求。
        `;

        // Set initial content
        editor.value = markdownContent.trim();

        // Function to render markdown
        function renderMarkdown() {
            preview.innerHTML = marked.parse(editor.value);
        }

        // Initial render
        renderMarkdown();

        // Add event listener for real-time updates
        editor.addEventListener('input', renderMarkdown);

        // Toolbar functionality
        const clearBtn = document.getElementById('clear-btn');
        const copyBtn = document.getElementById('copy-btn');
        const pasteBtn = document.getElementById('paste-btn');

        // Clear button
        clearBtn.addEventListener('click', function() {
            if (confirm('确定要清空编辑器内容吗？此操作无法撤销。')) {
                editor.value = '';
                renderMarkdown();
                editor.focus();
            }
        });

        // Copy button
        copyBtn.addEventListener('click', async function() {
            try {
                await navigator.clipboard.writeText(editor.value);
                
                // Visual feedback
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20,6 9,17 4,12"></polyline>
                    </svg>
                    Copied!
                `;
                copyBtn.style.background = '#28a745';
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.background = '';
                }, 2000);
            } catch (err) {
                alert('复制失败，请手动选择文本进行复制。');
            }
        });

        // Paste button
        pasteBtn.addEventListener('click', async function() {
            try {
                const clipboardText = await navigator.clipboard.readText();
                const cursorPosition = editor.selectionStart;
                const textBefore = editor.value.substring(0, cursorPosition);
                const textAfter = editor.value.substring(editor.selectionEnd);
                
                editor.value = textBefore + clipboardText + textAfter;
                editor.setSelectionRange(cursorPosition + clipboardText.length, cursorPosition + clipboardText.length);
                renderMarkdown();
                editor.focus();
                
                // Visual feedback
                const originalText = pasteBtn.innerHTML;
                pasteBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20,6 9,17 4,12"></polyline>
                    </svg>
                    Pasted!
                `;
                pasteBtn.style.background = '#28a745';
                
                setTimeout(() => {
                    pasteBtn.innerHTML = originalText;
                    pasteBtn.style.background = '';
                }, 2000);
            } catch (err) {
                alert('粘贴失败，请使用 Ctrl+V 手动粘贴。');
            }
        });

        // Keyboard shortcuts
        editor.addEventListener('keydown', function(e) {
            // Ctrl+K for clear (with confirmation)
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                clearBtn.click();
            }
            
            // Tab support for indentation
            if (e.key === 'Tab') {
                e.preventDefault();
                const start = this.selectionStart;
                const end = this.selectionEnd;
                this.value = this.value.substring(0, start) + '    ' + this.value.substring(end);
                this.setSelectionRange(start + 4, start + 4);
                renderMarkdown();
            }
        });

        // Check clipboard API support and disable paste button if not available
        if (!navigator.clipboard || !navigator.clipboard.readText) {
            pasteBtn.disabled = true;
            pasteBtn.title = '此浏览器不支持剪贴板 API';
        }
    </script>
</body>
</html>
