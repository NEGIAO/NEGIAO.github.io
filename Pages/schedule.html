<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NEGIAOçš„æ—¥å¸¸è¯¾è¡¨ - å®æ—¶æ˜¾ç¤ºå½“å‰è¯¾ç¨‹å’Œä¸‹èŠ‚è¯¾å®‰æ’">
    <meta name="keywords" content="è¯¾ç¨‹è¡¨, æ—¥ç¨‹å®‰æ’, å­¦ä¹ è®¡åˆ’, NEGIAO">
    <meta name="author" content="NEGIAO">
    <meta name="theme-color" content="#0D1117">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://negiao.github.io/Pages/schedule.html">
    <meta property="og:title" content="è¯¾ç¨‹è¡¨ - NEGIAO">
    <meta property="og:description" content="NEGIAOçš„æ—¥å¸¸è¯¾è¡¨ - å®æ—¶æ˜¾ç¤ºå½“å‰è¯¾ç¨‹å’Œä¸‹èŠ‚è¯¾å®‰æ’">
    <meta property="og:image" content="https://negiao.github.io/Pages/avatar.jpg">

    <title>è¯¾ç¨‹è¡¨ - NEGIAO</title>
    <link rel="icon" type="image/png" href="/images/icon.png">
    <link rel="shortcut icon" type="image/png" href="/images/icon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="main-enhanced.js" defer></script>

    <!-- Google Analytics -->
    <script>
        window.addEventListener('load', function () {
            setTimeout(function () {
                var script = document.createElement('script');
                script.src = 'https://www.googletagmanager.com/gtag/js?id=G-KYJ7Y4LE2N';
                script.async = true;

                // æ·»åŠ åŠ è½½å¤±è´¥çš„å¤„ç†
                script.onerror = function () {
                    console.log('å›½å†…æ— æ³•è®¿é—®è¯¥åŠŸèƒ½: Google Analytics');
                };

                document.head.appendChild(script);

                window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-KYJ7Y4LE2N');
            }, 3000);
        });
    </script>

    <style>
        /* ç°ä»£åŒ–è¯¾ç¨‹è¡¨æ ·å¼é‡è®¾è®¡ */
        .schedule-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-2xl) var(--space-md);
            background: linear-gradient(135deg,
                    rgba(0, 217, 255, 0.03) 0%,
                    rgba(78, 205, 196, 0.02) 35%,
                    rgba(255, 107, 107, 0.02) 65%,
                    rgba(255, 217, 61, 0.03) 100%);
            border-radius: var(--radius-2xl);
        }

        .schedule-header {
            text-align: center;
            margin-bottom: var(--space-2xl);
        }

        .schedule-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: var(--space-md);
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .current-time {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-xl);
            padding: var(--space-lg) var(--space-xl);
            margin-bottom: var(--space-xl);
            display: inline-flex;
            align-items: center;
            gap: var(--space-md);
            color: var(--text);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all var(--transition-normal);
        }

        .current-time:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        .schedule-table {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .table-wrapper {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: var(--space-lg);
            text-align: center;
            border: none;
            position: relative;
            transition: all var(--transition-normal);
        }

        th {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
            color: #ffffff;
            font-weight: 700;
            position: sticky;
            top: 0;
            z-index: 10;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-size: 1rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .time-column {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.04) 100%);
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--text);
            min-width: 120px;
            font-weight: 600;
            border-radius: var(--radius-md);
        }

        /* ç°ä»£åŒ–æ—¶æ®µèƒŒæ™¯åŒºåˆ† */
        .time-morning {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(255, 235, 59, 0.08) 100%);
            border-left: 4px solid #FFC107;
            border-radius: var(--radius-md);
            box-shadow: inset 0 1px 3px rgba(255, 193, 7, 0.2);
        }

        .time-afternoon {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.15) 0%, rgba(3, 169, 244, 0.08) 100%);
            border-left: 4px solid #2196F3;
            border-radius: var(--radius-md);
            box-shadow: inset 0 1px 3px rgba(33, 150, 243, 0.2);
        }

        .time-evening {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.15) 0%, rgba(233, 30, 99, 0.08) 100%);
            border-left: 4px solid #9C27B0;
            border-radius: var(--radius-md);
            box-shadow: inset 0 1px 3px rgba(156, 39, 176, 0.2);
        }

        /* ç°ä»£åŒ–è¯¾ç¨‹å—æ ·å¼ */
        .period-morning {
            background: linear-gradient(135deg, rgba(255, 248, 225, 0.8) 0%, rgba(255, 251, 235, 0.4) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 193, 7, 0.2);
        }

        .period-afternoon {
            background: linear-gradient(135deg, rgba(227, 242, 253, 0.8) 0%, rgba(240, 249, 255, 0.4) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(33, 150, 243, 0.2);
        }

        .period-evening {
            background: linear-gradient(135deg, rgba(243, 229, 245, 0.8) 0%, rgba(248, 243, 250, 0.4) 100%);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(156, 39, 176, 0.2);
        }

        .period-morning:hover {
            background: linear-gradient(135deg, rgba(255, 248, 225, 1) 0%, rgba(255, 251, 235, 0.6) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.15);
        }

        .period-afternoon:hover {
            background: linear-gradient(135deg, rgba(227, 242, 253, 1) 0%, rgba(240, 249, 255, 0.6) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(33, 150, 243, 0.15);
        }

        .period-evening:hover {
            background: linear-gradient(135deg, rgba(243, 229, 245, 1) 0%, rgba(248, 243, 250, 0.6) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(156, 39, 176, 0.15);
        }

        .day-header {
            background: var(--surface-elevated);
            min-width: 180px;
        }

        /* ç°ä»£åŒ–å‘¨å‡ é¢œè‰²åŒºåˆ† - æ•´åˆ—èƒŒæ™¯ */
        .col-monday {
            background: linear-gradient(180deg, rgba(244, 67, 54, 0.06) 0%, rgba(244, 67, 54, 0.02) 100%);
            border-radius: var(--radius-md);
        }

        .col-tuesday {
            background: linear-gradient(180deg, rgba(33, 150, 243, 0.06) 0%, rgba(33, 150, 243, 0.02) 100%);
            border-radius: var(--radius-md);
        }

        .col-wednesday {
            background: linear-gradient(180deg, rgba(76, 175, 80, 0.06) 0%, rgba(76, 175, 80, 0.02) 100%);
            border-radius: var(--radius-md);
        }

        .col-thursday {
            background: linear-gradient(180deg, rgba(255, 152, 0, 0.06) 0%, rgba(255, 152, 0, 0.02) 100%);
            border-radius: var(--radius-md);
        }

        .col-friday {
            background: linear-gradient(180deg, rgba(156, 39, 176, 0.06) 0%, rgba(156, 39, 176, 0.02) 100%);
            border-radius: var(--radius-md);
        }

        .day-header {
            min-width: 180px;
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-lg);
        }

        /* è¡¨å¤´çš„ç°ä»£åŒ–å‘¨å‡ é¢œè‰² */
        .day-header.day-monday {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.9) 0%, rgba(229, 57, 53, 0.9) 100%);
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }

        .day-header.day-tuesday {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.9) 0%, rgba(30, 136, 229, 0.9) 100%);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .day-header.day-wednesday {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.9) 0%, rgba(67, 160, 71, 0.9) 100%);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .day-header.day-thursday {
            background: linear-gradient(135deg, rgba(255, 152, 0, 0.9) 0%, rgba(251, 140, 0, 0.9) 100%);
            box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
        }

        .day-header.day-friday {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.9) 0%, rgba(142, 36, 170, 0.9) 100%);
            box-shadow: 0 4px 15px rgba(156, 39, 176, 0.3);
        }

        /* ä»Šæ—¥è¡¨å¤´å‘¼å¸ç¯æ•ˆæœ */
        .day-header.today {
            animation: breathingGlow 3s ease-in-out infinite;
            position: relative;
            overflow: visible;
        }

        .day-header.today::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg,
                    rgba(255, 255, 255, 0.3) 0%,
                    rgba(255, 255, 255, 0.1) 50%,
                    rgba(255, 255, 255, 0.3) 100%);
            border-radius: inherit;
            animation: breathingGlow 3s ease-in-out infinite;
            z-index: -1;
        }

        .day-header.today::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 8px;
            transform: translateY(-50%);
            font-size: 1.2rem;
            animation: todayPulse 2s ease-in-out infinite;
        }

        @keyframes breathingGlow {

            0%,
            100% {
                box-shadow:
                    0 4px 15px rgba(255, 255, 255, 0.2),
                    0 0 20px rgba(255, 255, 255, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3);
                transform: scale(1);
            }

            50% {
                box-shadow:
                    0 6px 25px rgba(255, 255, 255, 0.4),
                    0 0 40px rgba(255, 255, 255, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5);
                transform: scale(1.02);
            }
        }

        @keyframes todayPulse {

            0%,
            100% {
                opacity: 0.7;
                transform: translateY(-50%) scale(1);
            }

            50% {
                opacity: 1;
                transform: translateY(-50%) scale(1.1);
            }
        }

        /* ç°ä»£åŒ–è¯¾ç¨‹é¢œè‰²ä¸»é¢˜ - ä¼˜åŒ–ç‰ˆæœ¬ */
        [class*="course-"] {
            color: #ffffff;
            transition: all var(--transition-normal);
        }

        [class*="course-"]:hover {
            transform: translateY(-1px);
            filter: brightness(1.1);
        }

        .course-spatial-db {
            background: linear-gradient(135deg, rgba(63, 81, 181, 0.9) 0%, rgba(48, 63, 159, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(63, 81, 181, 0.3);
        }

        .course-gee {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.9) 0%, rgba(56, 142, 60, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .course-spatial-analysis {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.9) 0%, rgba(123, 31, 162, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(156, 39, 176, 0.3);
        }

        .course-gis-dev {
            background: linear-gradient(135deg, rgba(244, 67, 54, 0.9) 0%, rgba(211, 47, 47, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.3);
        }

        .course-navigation {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.9) 0%, rgba(25, 118, 210, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(33, 150, 243, 0.3);
        }

        .course-lidar {
            background: linear-gradient(135deg, rgba(103, 58, 183, 0.9) 0%, rgba(81, 45, 168, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(103, 58, 183, 0.3);
        }

        .course-ml {
            background: linear-gradient(135deg, rgba(233, 30, 99, 0.9) 0%, rgba(194, 24, 91, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(233, 30, 99, 0.3);
        }

        .course-uav {
            background: linear-gradient(135deg, rgba(0, 150, 136, 0.9) 0%, rgba(0, 121, 107, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(0, 150, 136, 0.3);
        }

        .course-photogrammetry {
            background: linear-gradient(135deg, rgba(121, 85, 72, 0.9) 0%, rgba(93, 64, 55, 0.7) 100%);
            box-shadow: 0 6px 20px rgba(121, 85, 72, 0.3);
        }

        /* ç°ä»£åŒ–åˆå¹¶å•å…ƒæ ¼æ ·å¼ - å»æ‰å…¨åŒ…å›´è¾¹æ¡† */
        .merged-cell {
            vertical-align: middle;
            position: relative;
            border-radius: var(--radius-lg);
            border: none;
            overflow: hidden;
            transition: all var(--transition-normal);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* å·¦ä¾§è‰²æ¡è£…é¥° */
        .merged-cell::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.6) 100%);
            z-index: 2;
            border-radius: 0 3px 3px 0;
        }

        /* é¡¶éƒ¨å¾®å¦™å…‰æ•ˆ */
        .merged-cell::after {
            content: '';
            position: absolute;
            top: 0;
            left: 6px;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
            z-index: 1;
        }

        .merged-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            text-align: center;
            padding: var(--space-lg);
            position: relative;
            z-index: 3;
        }

        .merged-content .course-name {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: var(--space-sm);
            line-height: 1.3;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .merged-content .course-location {
            font-size: 0.9rem;
            margin-bottom: var(--space-sm);
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .course-duration {
            font-size: 0.8rem;
            background: rgba(255, 255, 255, 0.15);
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-full);
            margin-top: var(--space-sm);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-weight: 600;
        }

        /* è¯¾ç¨‹æ‚¬åœæ•ˆæœ - æ›´æ¸©å’Œ */
        .merged-cell:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .merged-cell:hover::before {
            width: 8px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.8) 100%);
        }

        /* ä¸åŒè¯¾ç¨‹çš„ç°ä»£åŒ–åˆå¹¶å•å…ƒæ ¼å·¦ä¾§è‰²æ¡ */
        .course-spatial-db.merged-cell::before {
            background: linear-gradient(180deg, #3F51B5 0%, #5C6BC0 100%);
            box-shadow: 2px 0 8px rgba(63, 81, 181, 0.3);
        }

        .course-gee.merged-cell::before {
            background: linear-gradient(180deg, #4CAF50 0%, #66BB6A 100%);
            box-shadow: 2px 0 8px rgba(76, 175, 80, 0.3);
        }

        .course-spatial-analysis.merged-cell::before {
            background: linear-gradient(180deg, #9C27B0 0%, #BA68C8 100%);
            box-shadow: 2px 0 8px rgba(156, 39, 176, 0.3);
        }

        .course-gis-dev.merged-cell::before {
            background: linear-gradient(180deg, #F44336 0%, #EF5350 100%);
            box-shadow: 2px 0 8px rgba(244, 67, 54, 0.3);
        }

        .course-navigation.merged-cell::before {
            background: linear-gradient(180deg, #2196F3 0%, #64B5F6 100%);
            box-shadow: 2px 0 8px rgba(33, 150, 243, 0.3);
        }

        .course-lidar.merged-cell::before {
            background: linear-gradient(180deg, #673AB7 0%, #9575CD 100%);
            box-shadow: 2px 0 8px rgba(103, 58, 183, 0.3);
        }

        .course-ml.merged-cell::before {
            background: linear-gradient(180deg, #E91E63 0%, #F06292 100%);
            box-shadow: 2px 0 8px rgba(233, 30, 99, 0.3);
        }

        .course-uav.merged-cell::before {
            background: linear-gradient(180deg, #009688 0%, #4DB6AC 100%);
            box-shadow: 2px 0 8px rgba(0, 150, 136, 0.3);
        }

        .course-photogrammetry.merged-cell::before {
            background: linear-gradient(180deg, #795548 0%, #A1887F 100%);
            box-shadow: 2px 0 8px rgba(121, 85, 72, 0.3);
        }

        /* æ‚¬åœæ—¶å¢å¼ºè‰²æ¡æ•ˆæœ */
        .course-spatial-db.merged-cell:hover::before {
            background: linear-gradient(180deg, #3F51B5 0%, #7986CB 100%);
            box-shadow: 3px 0 12px rgba(63, 81, 181, 0.5);
        }

        .course-gee.merged-cell:hover::before {
            background: linear-gradient(180deg, #4CAF50 0%, #81C784 100%);
            box-shadow: 3px 0 12px rgba(76, 175, 80, 0.5);
        }

        .course-spatial-analysis.merged-cell:hover::before {
            background: linear-gradient(180deg, #9C27B0 0%, #CE93D8 100%);
            box-shadow: 3px 0 12px rgba(156, 39, 176, 0.5);
        }

        .course-gis-dev.merged-cell:hover::before {
            background: linear-gradient(180deg, #F44336 0%, #FFAB91 100%);
            box-shadow: 3px 0 12px rgba(244, 67, 54, 0.5);
        }

        .course-navigation.merged-cell:hover::before {
            background: linear-gradient(180deg, #2196F3 0%, #90CAF9 100%);
            box-shadow: 3px 0 12px rgba(33, 150, 243, 0.5);
        }

        .course-lidar.merged-cell:hover::before {
            background: linear-gradient(180deg, #673AB7 0%, #B39DDB 100%);
            box-shadow: 3px 0 12px rgba(103, 58, 183, 0.5);
        }

        .course-ml.merged-cell:hover::before {
            background: linear-gradient(180deg, #E91E63 0%, #F8BBD9 100%);
            box-shadow: 3px 0 12px rgba(233, 30, 99, 0.5);
        }

        .course-uav.merged-cell:hover::before {
            background: linear-gradient(180deg, #009688 0%, #80CBC4 100%);
            box-shadow: 3px 0 12px rgba(0, 150, 136, 0.5);
        }

        .course-photogrammetry.merged-cell:hover::before {
            background: linear-gradient(180deg, #795548 0%, #D7CCC8 100%);
            box-shadow: 3px 0 12px rgba(121, 85, 72, 0.5);
        }

        .period-cell {
            background: var(--surface);
            transition: all var(--transition-normal);
            cursor: pointer;
            min-height: 60px;
            vertical-align: middle;
        }

        .period-cell:hover {
            background: var(--surface-hover);
            transform: scale(1.02);
        }

        .course-name {
            font-weight: 600;
            color: var(--text);
            margin-bottom: var(--space-xs);
        }

        .course-location {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* å½“å‰è¯¾ç¨‹é«˜äº® - å‘¼å¸ç¯æ•ˆæœ */
        .current-period {
            background: linear-gradient(135deg,
                    rgba(76, 175, 80, 0.18) 0%,
                    rgba(129, 199, 132, 0.13) 50%,
                    rgba(165, 214, 167, 0.09) 100%) !important;
            animation: breathingGlow 2.8s ease-in-out infinite;
            box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.18), 0 2px 8px rgba(76, 175, 80, 0.10);
        }



        .current-period .course-name {
            color: var(--text) !important;
            font-weight: 600;
        }

        .current-period .course-location {
            color: var(--text-muted) !important;
        }

        /* å‘¼å¸ç¯åŠ¨ç”» */
        @keyframes breathingGlow {

            0%,
            100% {
                box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.18), 0 2px 8px rgba(76, 175, 80, 0.10);
                transform: scale(1);
            }

            50% {
                box-shadow: 0 0 16px 8px rgba(76, 175, 80, 0.22), 0 4px 16px rgba(76, 175, 80, 0.13);
                transform: scale(1.025);
            }
        }

        /* ç°ä»£åŒ–ä¸‹èŠ‚è¯¾ç¨‹é«˜äº® - ç®€åŒ–ç‰ˆæœ¬ */
        .next-period {
            background: linear-gradient(135deg,
                    rgba(255, 152, 0, 0.2) 0%,
                    rgba(255, 183, 77, 0.15) 50%,
                    rgba(255, 204, 128, 0.1) 100%) !important;
        }

        .next-period .course-name {
            color: var(--text) !important;
            font-weight: 600;
        }

        .next-period .course-location {
            color: var(--text-muted) !important;
        }

        /* ç°ä»£åŒ–é€šå‹¤æé†’é«˜äº® - ç®€åŒ–ç‰ˆæœ¬ */
        .commute-period {
            background: linear-gradient(135deg,
                    rgba(33, 150, 243, 0.2) 0%,
                    rgba(100, 181, 246, 0.15) 50%,
                    rgba(144, 202, 249, 0.1) 100%) !important;
        }

        .commute-period .course-name {
            color: var(--text) !important;
            font-weight: 600;
        }

        .commute-period .course-location {
            color: var(--text-muted) !important;
        }

        /* ç°ä»£åŒ–åŠ¨ç”»æ•ˆæœ */
        @keyframes currentPulse {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }



        /* Empty period */
        .empty-period {
            background: var(--surface);
            color: transparent;
            font-style: italic;
        }

        /* ç°ä»£åŒ–çŠ¶æ€æŒ‡ç¤ºå™¨å¸ƒå±€ */
        .status-indicators {
            display: flex;
            justify-content: center;
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
            flex-wrap: wrap;
            padding: var(--space-lg);
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-xl);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md) var(--space-lg);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border-radius: var(--radius-lg);
            font-size: 0.9rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }

        .status-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }

        .status-indicator:hover::before {
            left: 100%;
        }

        .status-indicator:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .indicator-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            position: relative;
            animation: dotPulse 2s infinite;
        }

        .current-dot {
            background: linear-gradient(135deg, #4CAF50, #81C784);
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.6);
        }

        .next-dot {
            background: linear-gradient(135deg, #FF9800, #FFB74D);
            box-shadow: 0 0 20px rgba(255, 152, 0, 0.6);
        }

        .normal-dot {
            background: linear-gradient(135deg, #64748B, #94A3B8);
            box-shadow: 0 0 10px rgba(100, 116, 139, 0.4);
        }

        @keyframes dotPulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0.8;
            }
        }

        /* å“åº”å¼è®¾è®¡ä¼˜åŒ– */
        @media (max-width: 768px) {
            .schedule-container {
                padding: var(--space-lg) var(--space-xs);
            }

            .schedule-title {
                font-size: clamp(1.5rem, 6vw, 2.5rem);
                margin-bottom: var(--space-lg);
            }

            .current-time {
                padding: var(--space-sm);
                font-size: 0.875rem;
            }

            .status-indicators {
                flex-direction: column;
                align-items: center;
                gap: var(--space-md);
                margin-bottom: var(--space-lg);
                padding: var(--space-md);
            }

            .status-indicator {
                padding: var(--space-sm) var(--space-md);
                font-size: 0.8rem;
                width: 100%;
                max-width: 280px;
                justify-content: center;
            }

            .indicator-dot {
                width: 14px;
                height: 14px;
            }

            .table-wrapper {
                font-size: 0.75rem;
                border-radius: var(--radius-lg);
                overflow: hidden;
            }

            th,
            td {
                padding: var(--space-xs);
                min-height: 45px;
            }

            .day-header {
                min-width: 80px;
                font-size: 0.75rem;
                padding: var(--space-sm) var(--space-xs);
            }

            .time-slot {
                min-width: 60px;
                font-size: 0.7rem;
                padding: var(--space-xs);
            }

            .course-cell {
                font-size: 0.7rem;
                min-height: 40px;
                padding: var(--space-xs);
            }

            .course-name {
                font-size: 0.7rem;
                margin-bottom: 2px;
            }

            .course-location {
                font-size: 0.65rem;
            }

            .merged-content {
                padding: var(--space-sm);
                gap: var(--space-xs);
            }

            .merged-content .course-name {
                font-size: 0.9rem;
                margin-bottom: var(--space-xs);
            }

            .merged-content .course-location {
                font-size: 0.75rem;
            }

            .course-duration {
                font-size: 0.7rem;
                padding: 2px var(--space-sm);
            }

            /* ç§»åŠ¨ç«¯åŠ¨ç”»ä¼˜åŒ– */
            .current-period,
            .next-period,
            .commute-period {
                animation-duration: 4s;
            }

            .merged-cell:hover {
                transform: translateY(-2px) scale(1.01);
            }
        }

        /* è¶…å°å±å¹•ä¼˜åŒ– */
        @media (max-width: 480px) {
            .schedule-container {
                padding: var(--space-md) var(--space-xs);
            }

            .schedule-title {
                font-size: 1.5rem;
                margin-bottom: var(--space-md);
            }

            .status-indicators {
                padding: var(--space-sm);
                gap: var(--space-sm);
            }

            .status-indicator {
                padding: var(--space-xs) var(--space-sm);
                font-size: 0.75rem;
            }

            .table-wrapper {
                font-size: 0.7rem;
            }

            .day-header {
                min-width: 70px;
                font-size: 0.7rem;
            }

            .time-slot {
                min-width: 50px;
                font-size: 0.65rem;
            }

            .course-cell {
                min-height: 35px;
                padding: 2px;
            }

            .course-name {
                font-size: 0.65rem;
            }

            .course-location {
                font-size: 0.6rem;
                line-height: 1.1;
            }

            .period-cell {
                min-height: 45px;
                padding: var(--space-xs);
            }

            /* ç§»åŠ¨ç«¯åˆå¹¶è¯¾ç¨‹ä¼˜åŒ– */
            .merged-content {
                padding: var(--space-sm);
            }

            .merged-content .course-name {
                font-size: 0.8rem;
                margin-bottom: var(--space-xs);
            }

            .merged-content .course-location {
                font-size: 0.7rem;
            }

            .course-duration {
                font-size: 0.65rem;
                padding: 2px var(--space-xs);
            }
        }

        @media (max-width: 480px) {
            .schedule-container {
                padding: var(--space-md) var(--space-xs);
            }

            .navbar__container {
                padding: 0 var(--space-sm);
            }

            .table-wrapper {
                font-size: 0.7rem;
            }

            th,
            td {
                padding: 2px;
                min-height: 40px;
            }

            .day-header {
                min-width: 60px;
                font-size: 0.7rem;
            }

            .time-column {
                min-width: 70px;
                font-size: 0.65rem;
            }

            .course-name {
                font-size: 0.65rem;
                margin-bottom: 1px;
            }

            .course-location {
                font-size: 0.55rem;
            }

            .period-cell {
                min-height: 40px;
                padding: 2px;
            }

            .status-indicators {
                flex-wrap: wrap;
                justify-content: center;
            }

            .status-indicator {
                padding: var(--space-xs);
                font-size: 0.7rem;
                margin: 2px;
            }

            /* è¶…å°å±å¹•çš„åˆå¹¶è¯¾ç¨‹ä¼˜åŒ– */
            .merged-content {
                padding: var(--space-xs);
            }

            .merged-content .course-name {
                font-size: 0.75rem;
                margin-bottom: 2px;
                line-height: 1.2;
            }

            .merged-content .course-location {
                font-size: 0.65rem;
                margin-bottom: 2px;
            }

            .course-duration {
                font-size: 0.6rem;
                padding: 1px var(--space-xs);
                margin-top: 2px;
            }
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            height: 4.5rem;
            transition: all var(--transition-normal);
        }

        .navbar__container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 4.5rem;
            max-width: min(1400px, calc(100vw - 2rem));
            margin: 0 auto;
            padding: 0 var(--space-md);
        }

        .navbar__brand {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            text-decoration: none;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        main {
            margin-top: 4.5rem;
        }
    </style>
</head>

<body>
    <!-- å¯¼èˆªæ  -->
    <header class="navbar">
        <div class="navbar__container">
            <a href="../index.html" class="navbar__brand">NEGIAO</a>
            <a href="../index.html" class="btn btn--secondary">
                <i class="fas fa-home"></i> è¿”å›é¦–é¡µ
            </a>
        </div>
    </header>

    <main>
        <div class="schedule-container">
            <!-- é¡µé¢æ ‡é¢˜ -->
            <div class="schedule-header">
                <h1 class="schedule-title">ğŸ“… è¯¾ç¨‹è¡¨</h1>
                <div class="current-time" id="currentTime">
                    <i class="fas fa-clock"></i>
                    <span id="timeDisplay">åŠ è½½ä¸­...</span>
                </div>
            </div>

            <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <div class="status-indicators">
                <div class="status-indicator">
                    <div class="indicator-dot current-dot"></div>
                    <span>å½“å‰è¯¾ç¨‹</span>
                </div>
                <div class="status-indicator">
                    <div class="indicator-dot next-dot"></div>
                    <span>ä¸‹èŠ‚è¯¾</span>
                </div>
                <div class="status-indicator">
                    <div class="indicator-dot"
                        style="background: var(--accent-secondary); box-shadow: 0 0 10px rgba(78, 205, 196, 0.5);">
                    </div>
                    <span>é€šå‹¤æé†’ (40åˆ†é’Ÿå†…)</span>
                </div>
            </div>

            <!-- è¯¾ç¨‹è¡¨ -->
            <div class="schedule-table">
                <div class="table-wrapper">
                    <table id="scheduleTable">
                        <thead>
                            <tr>
                                <th class="time-column">æ—¶é—´</th>
                                <th class="day-header day-monday">å‘¨ä¸€</th>
                                <th class="day-header day-tuesday">å‘¨äºŒ</th>
                                <th class="day-header day-wednesday">å‘¨ä¸‰</th>
                                <th class="day-header day-thursday">å‘¨å››</th>
                                <th class="day-header day-friday">å‘¨äº”</th>
                            </tr>
                        </thead>
                        <tbody id="scheduleBody">
                            <!-- è¯¾ç¨‹è¡¨å†…å®¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <script>
        // è¯¾ç¨‹æ—¶é—´è¡¨
        const timeSlots = [
            { period: 1, start: '08:00', end: '08:45' },
            { period: 2, start: '08:55', end: '09:40' },
            { period: 3, start: '10:00', end: '10:45' },
            { period: 4, start: '10:55', end: '11:40' },
            { period: 5, start: '11:45', end: '12:30' },
            { period: 6, start: '14:05', end: '14:50' },
            { period: 7, start: '15:00', end: '15:45' },
            { period: 8, start: '15:55', end: '16:40' },
            { period: 9, start: '17:00', end: '17:45' },
            { period: 10, start: '17:55', end: '18:40' },
            { period: 11, start: '19:10', end: '19:55' },
            { period: 12, start: '20:05', end: '20:50' },
            { period: 13, start: '20:55', end: '21:40' }
        ];

        // è¯¾ç¨‹å®‰æ’
        const schedule = {
            1: { // å‘¨ä¸€
                3: { name: 'ç©ºé—´æ•°æ®åº“', location: '113æœºæˆ¿' },
                4: { name: 'ç©ºé—´æ•°æ®åº“', location: '113æœºæˆ¿' },
                7: { name: 'ç©ºé—´æ•°æ®åº“', location: '114æœºæˆ¿' },
                8: { name: 'ç©ºé—´æ•°æ®åº“', location: '114æœºæˆ¿' }
            },
            2: { // å‘¨äºŒ
                1: { name: 'GEE', location: '113' },
                2: { name: 'GEE', location: '113' },
                3: { name: 'ç©ºé—´åˆ†æ', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                4: { name: 'ç©ºé—´åˆ†æ', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                5: { name: 'ç©ºé—´åˆ†æ', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                9: { name: 'GISäºŒæ¬¡å¼€å‘', location: '114' },
                10: { name: 'GISäºŒæ¬¡å¼€å‘', location: '114' },
                11: { name: 'GISäºŒæ¬¡å¼€å‘', location: '114' },
                12: { name: 'GISäºŒæ¬¡å¼€å‘', location: '114' }
            },
            3: { // å‘¨ä¸‰
                6: { name: 'å«æ˜Ÿå¯¼èˆªåŸç†', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                7: { name: 'å«æ˜Ÿå¯¼èˆªåŸç†', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                8: { name: 'å«æ˜Ÿå¯¼èˆªåŸç†', location: 'æ›¾å®ªæ¢“æ¥¼606' }
            },
            4: { // å‘¨å››
                3: { name: 'æ¿€å…‰é›·è¾¾é¥æ„Ÿ', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                4: { name: 'æ¿€å…‰é›·è¾¾é¥æ„Ÿ', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                11: { name: 'æœºå™¨å­¦ä¹ å¯¼è®º', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                12: { name: 'æœºå™¨å­¦ä¹ å¯¼è®º', location: 'æ›¾å®ªæ¢“æ¥¼606' }
            },
            5: { // å‘¨äº”
                1: { name: 'æ— äººæœºé¥æ„Ÿ', location: '114' },
                2: { name: 'æ— äººæœºé¥æ„Ÿ', location: '114' },
                6: { name: 'æ‘„å½±æµ‹é‡å­¦', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                7: { name: 'æ‘„å½±æµ‹é‡å­¦', location: 'æ›¾å®ªæ¢“æ¥¼606' },
                8: { name: 'æ‘„å½±æµ‹é‡å­¦', location: 'æ›¾å®ªæ¢“æ¥¼606' }
            }
        };

        // è¯¾ç¨‹é¢œè‰²æ˜ å°„
        const courseColors = {
            'ç©ºé—´æ•°æ®åº“': 'course-spatial-db',
            'GEE': 'course-gee',
            'ç©ºé—´åˆ†æ': 'course-spatial-analysis',
            'GISäºŒæ¬¡å¼€å‘': 'course-gis-dev',
            'å«æ˜Ÿå¯¼èˆªåŸç†': 'course-navigation',
            'æ¿€å…‰é›·è¾¾é¥æ„Ÿ': 'course-lidar',
            'æœºå™¨å­¦ä¹ å¯¼è®º': 'course-ml',
            'æ— äººæœºé¥æ„Ÿ': 'course-uav',
            'æ‘„å½±æµ‹é‡å­¦': 'course-photogrammetry'
        };

        // ä¼˜åŒ–çš„æ—¶é—´æ®µç›¸é‚»æ£€æŸ¥å‡½æ•°ï¼ˆå†…è”ç®€åŒ–ï¼‰
        const isAdjacentPeriod = (period1, period2) => {
            const slot1 = timeSlots.find(s => s.period === period1);
            const slot2 = timeSlots.find(s => s.period === period2);

            if (!slot1 || !slot2) return false;

            return (timeToMinutes(slot2.start) - timeToMinutes(slot1.end)) <= 20;
        };

        // æ€§èƒ½ä¼˜åŒ–ï¼šç¼“å­˜å¸¸ç”¨å…ƒç´ å’Œè®¡ç®—ç»“æœ
        const domCache = {
            timeDisplay: null,
            scheduleBody: null,
            dayHeaders: null
        };

        const timeCache = new Map(); // ç¼“å­˜æ—¶é—´è½¬æ¢ç»“æœ
        let lastUpdateTime = 0;
        let lastStatusCheck = 0;
        let cachedStatus = null;

        // ä¼˜åŒ–çš„æ—¶é—´è½¬æ¢å‡½æ•°ï¼ˆå¸¦ç¼“å­˜ï¼‰
        const timeToMinutes = (() => {
            const cache = new Map();
            return (timeStr) => {
                if (cache.has(timeStr)) {
                    return cache.get(timeStr);
                }
                const [hours, minutes] = timeStr.split(':').map(Number);
                const result = hours * 60 + minutes;
                cache.set(timeStr, result);
                return result;
            };
        })();

        // ä¼˜åŒ–çš„æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤ºå‡½æ•°
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                weekday: 'long'
            });

            // ä½¿ç”¨ç¼“å­˜çš„DOMå…ƒç´ 
            if (!domCache.timeDisplay) {
                domCache.timeDisplay = document.getElementById('timeDisplay');
            }
            domCache.timeDisplay.textContent = timeString;
        }

        // ä¼˜åŒ–çš„è¯¾ç¨‹çŠ¶æ€è·å–å‡½æ•°ï¼ˆå¸¦ç¼“å­˜ï¼‰
        function getCurrentPeriodStatus() {
            const now = new Date();
            const currentTime = now.getTime();

            // ç¼“å­˜1åˆ†é’Ÿå†…çš„ç»“æœ
            if (cachedStatus && (currentTime - lastStatusCheck) < 60000) {
                return cachedStatus;
            }

            const currentDay = now.getDay();
            const currentTimeMinutes = now.getHours() * 60 + now.getMinutes();

            // åªåœ¨å‘¨ä¸€åˆ°å‘¨äº”æ˜¾ç¤ºçŠ¶æ€
            if (currentDay < 1 || currentDay > 5) {
                cachedStatus = { current: null, next: null };
                lastStatusCheck = currentTime;
                return cachedStatus;
            }

            let currentCourseBlock = null;
            let nextCourseBlock = null;

            // ä¼˜åŒ–ï¼šé¢„å…ˆè®¡ç®—æ‰€æœ‰æ—¶é—´æ®µ
            const timeRanges = timeSlots.map(slot => ({
                period: slot.period,
                start: timeToMinutes(slot.start),
                end: timeToMinutes(slot.end)
            }));

            // æ‰¾å‡ºå½“å‰æ­£åœ¨è¿›è¡Œçš„è¯¾ç¨‹
            for (const range of timeRanges) {
                if (schedule[currentDay]?.[range.period] &&
                    currentTimeMinutes >= range.start &&
                    currentTimeMinutes <= range.end) {
                    currentCourseBlock = findCourseBlock(currentDay, range.period);
                    break;
                }
            }

            // æ‰¾ä¸‹ä¸€èŠ‚è¯¾
            if (!currentCourseBlock) {
                // æ²¡æœ‰å½“å‰è¯¾ç¨‹ï¼Œæ‰¾ä¸‹ä¸€èŠ‚è¯¾
                for (const range of timeRanges) {
                    if (schedule[currentDay]?.[range.period] && currentTimeMinutes < range.start) {
                        nextCourseBlock = findCourseBlock(currentDay, range.period);
                        break;
                    }
                }
            } else {
                // æœ‰å½“å‰è¯¾ç¨‹ï¼Œæ‰¾å½“å‰è¯¾ç¨‹ç»“æŸåçš„ä¸‹ä¸€èŠ‚è¯¾
                for (let period = currentCourseBlock.endPeriod + 1; period <= 13; period++) {
                    if (schedule[currentDay]?.[period]) {
                        nextCourseBlock = findCourseBlock(currentDay, period);
                        break;
                    }
                }
            }

            cachedStatus = { current: currentCourseBlock, next: nextCourseBlock };
            lastStatusCheck = currentTime;
            return cachedStatus;
        }

        // ä¼˜åŒ–çš„è¯¾ç¨‹å—æŸ¥æ‰¾å‡½æ•°
        function findCourseBlock(day, startPeriod) {
            const course = schedule[day]?.[startPeriod];
            if (!course) return null;

            const { name: courseName, location: courseLocation } = course;

            // å‘å‰æŸ¥æ‰¾å—çš„çœŸæ­£å¼€å§‹
            let blockStart = startPeriod;
            while (blockStart > 1 &&
                schedule[day]?.[blockStart - 1]?.name === courseName &&
                isAdjacentPeriod(blockStart - 1, blockStart)) {
                blockStart--;
            }

            // å‘åæŸ¥æ‰¾å—çš„ç»“æŸ
            let blockEnd = startPeriod;
            while (blockEnd < 13 &&
                schedule[day]?.[blockEnd + 1]?.name === courseName &&
                isAdjacentPeriod(blockEnd, blockEnd + 1)) {
                blockEnd++;
            }

            const startSlot = timeSlots.find(s => s.period === blockStart);
            const endSlot = timeSlots.find(s => s.period === blockEnd);

            return {
                day,
                startPeriod: blockStart,
                endPeriod: blockEnd,
                courseName,
                location: courseLocation,
                startTime: timeToMinutes(startSlot.start),
                endTime: timeToMinutes(endSlot.end)
            };
        }

        // ä¼˜åŒ–çš„è¯¾ç¨‹è¡¨ç”Ÿæˆå‡½æ•°
        function generateScheduleTable() {
            // ç¼“å­˜DOMå…ƒç´ 
            if (!domCache.scheduleBody) {
                domCache.scheduleBody = document.getElementById('scheduleBody');
            }

            const tbody = domCache.scheduleBody;
            const status = getCurrentPeriodStatus();

            tbody.innerHTML = '';

            // é¢„è®¡ç®—å¸¸ç”¨æ•°æ®
            const processedCells = new Set();
            const dayClasses = ['', 'col-monday', 'col-tuesday', 'col-wednesday', 'col-thursday', 'col-friday'];
            const periodClasses = ['period-morning', 'period-afternoon', 'period-evening'];
            const timeClasses = ['time-morning', 'time-afternoon', 'time-evening'];

            timeSlots.forEach(slot => {
                const row = document.createElement('tr');

                // ç¡®å®šæ—¶æ®µç±»å‹ï¼ˆä¼˜åŒ–ä¸ºæ•°ç»„ç´¢å¼•ï¼‰
                const timeIndex = slot.period <= 5 ? 0 : slot.period <= 10 ? 1 : 2;

                // åˆ›å»ºæ—¶é—´åˆ—
                const timeCell = document.createElement('td');
                timeCell.className = `time-column ${timeClasses[timeIndex]}`;
                timeCell.innerHTML = `<strong>ç¬¬${slot.period}èŠ‚</strong><br>${slot.start} - ${slot.end}`;
                row.appendChild(timeCell);

                // å¤„ç†å‘¨ä¸€åˆ°å‘¨äº”çš„è¯¾ç¨‹
                for (let day = 1; day <= 5; day++) {
                    const cellKey = `${day}-${slot.period}`;

                    if (processedCells.has(cellKey)) continue;

                    const cell = document.createElement('td');
                    cell.className = `period-cell ${periodClasses[timeIndex]} ${dayClasses[day]}`;

                    const course = schedule[day]?.[slot.period];
                    if (course) {
                        // è®¡ç®—è¿ç»­è¯¾ç¨‹æ•°é‡
                        let continuousCount = 1;
                        let currentPeriod = slot.period + 1;

                        while (currentPeriod <= 13 &&
                            schedule[day]?.[currentPeriod]?.name === course.name &&
                            isAdjacentPeriod(currentPeriod - 1, currentPeriod)) {
                            continuousCount++;
                            processedCells.add(`${day}-${currentPeriod}`);
                            currentPeriod++;
                        }

                        // è®¾ç½®å•å…ƒæ ¼å±æ€§
                        if (continuousCount > 1) {
                            cell.setAttribute('rowspan', continuousCount);
                            cell.classList.add('merged-cell');
                        }

                        // æ·»åŠ è¯¾ç¨‹é¢œè‰²
                        const courseColorClass = courseColors[course.name] || '';
                        if (courseColorClass) {
                            cell.classList.add(courseColorClass);
                        }

                        // è®¾ç½®è¯¾ç¨‹å†…å®¹
                        cell.innerHTML = `
                            <div class="course-content merged-content">
                                <div class="course-name">${course.name}</div>
                                <div class="course-location">${course.location}</div>
                                ${continuousCount > 1 ? `<div class="course-duration">${continuousCount}èŠ‚è¯¾</div>` : ''}
                            </div>
                        `;

                        // æ£€æŸ¥è¯¾ç¨‹çŠ¶æ€å¹¶æ·»åŠ ç›¸åº”ç±»
                        if (status.current?.day === day &&
                            slot.period >= status.current.startPeriod &&
                            slot.period <= status.current.endPeriod &&
                            course.name === status.current.courseName) {
                            cell.classList.add('current-period');
                        } else if (status.next?.day === day &&
                            slot.period >= status.next.startPeriod &&
                            slot.period <= status.next.endPeriod &&
                            course.name === status.next.courseName) {
                            // æ£€æŸ¥æ˜¯å¦åœ¨é€šå‹¤æ—¶é—´å†…
                            const now = new Date();
                            const currentTime = now.getHours() * 60 + now.getMinutes();

                            if (currentTime < status.next.startTime &&
                                (status.next.startTime - currentTime) <= 40) {
                                cell.classList.add('commute-period');
                            } else {
                                cell.classList.add('next-period');
                            }
                        }
                    } else {
                        cell.classList.add('empty-period');
                        cell.innerHTML = '';
                    }

                    row.appendChild(cell);
                    processedCells.add(cellKey);
                }

                tbody.appendChild(row);
            });
        }

        // ä¼˜åŒ–çš„ä»Šæ—¥è¡¨å¤´å‘¼å¸ç¯æ•ˆæœè®¾ç½®
        const setTodayHeaderGlow = (() => {
            let lastDay = -1; // ç¼“å­˜ä¸Šæ¬¡è®¾ç½®çš„æ—¥æœŸ

            return function () {
                const now = new Date();
                const currentDay = now.getDay();

                // å¦‚æœæ—¥æœŸæ²¡æœ‰å˜åŒ–ï¼Œä¸é‡å¤è®¾ç½®
                if (currentDay === lastDay) return;

                // ç¼“å­˜è¡¨å¤´å…ƒç´ 
                if (!domCache.dayHeaders) {
                    domCache.dayHeaders = document.querySelectorAll('.day-header');
                }

                // æ¸…é™¤æ‰€æœ‰todayç±»
                domCache.dayHeaders.forEach(header => {
                    header.classList.remove('today');
                });

                // åªåœ¨å‘¨ä¸€åˆ°å‘¨äº”æ·»åŠ todayç±»
                if (currentDay >= 1 && currentDay <= 5) {
                    const dayClasses = ['', 'day-monday', 'day-tuesday', 'day-wednesday', 'day-thursday', 'day-friday'];
                    const todayClass = dayClasses[currentDay];
                    const todayHeader = document.querySelector(`.day-header.${todayClass}`);

                    if (todayHeader) {
                        todayHeader.classList.add('today');
                    }
                }

                lastDay = currentDay;
            };
        })();

        // ä¼˜åŒ–çš„åˆå§‹åŒ–å‡½æ•°
        function init() {
            // åˆå§‹åŒ–DOMç¼“å­˜
            domCache.timeDisplay = document.getElementById('timeDisplay');
            domCache.scheduleBody = document.getElementById('scheduleBody');
            domCache.dayHeaders = document.querySelectorAll('.day-header');

            // åˆå§‹åŠ è½½
            updateCurrentTime();
            generateScheduleTable();
            setTodayHeaderGlow();

            // æ€§èƒ½ä¼˜åŒ–çš„å®šæ—¶å™¨è®¾ç½®
            // æ—¶é—´æ˜¾ç¤ºæ¯ç§’æ›´æ–°ï¼ˆè½»é‡çº§æ“ä½œï¼‰
            setInterval(updateCurrentTime, 1000);

            // è¯¾ç¨‹çŠ¶æ€æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼ˆå‡å°‘DOMæ“ä½œï¼‰
            setInterval(() => {
                const now = Date.now();
                if (now - lastUpdateTime >= 60000) {
                    generateScheduleTable();
                    lastUpdateTime = now;
                }
            }, 60000);

            // æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡ä»Šæ—¥è¡¨å¤´ï¼ˆå¤„ç†è·¨æ—¥æƒ…å†µï¼‰
            setInterval(setTodayHeaderGlow, 3600000);

            // é¡µé¢å¯è§æ€§APIä¼˜åŒ– - é¡µé¢é‡æ–°æ¿€æ´»æ—¶å¼ºåˆ¶æ›´æ–°
            document.addEventListener('visibilitychange', () => {
                if (!document.hidden) {
                    updateCurrentTime();
                    generateScheduleTable();
                    setTodayHeaderGlow();
                    lastUpdateTime = Date.now();
                }
            });

            // çª—å£ç„¦ç‚¹ä¼˜åŒ– - å‡å°‘ä¸å¿…è¦çš„æ›´æ–°
            let isWindowFocused = true;
            window.addEventListener('focus', () => {
                isWindowFocused = true;
                updateCurrentTime();
                generateScheduleTable();
                setTodayHeaderGlow();
            });

            window.addEventListener('blur', () => {
                isWindowFocused = false;
            });

            // ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šè‡ªåŠ¨æ»šåŠ¨åˆ°ä»Šå¤©
            if (window.innerWidth < 768) {
                setTimeout(() => {
                    const todayHeader = document.querySelector('.day-header.today');
                    if (todayHeader) {
                        todayHeader.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                    }
                }, 500);
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>